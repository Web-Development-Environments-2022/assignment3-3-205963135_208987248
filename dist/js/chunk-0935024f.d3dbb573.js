(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0935024f"],{"67e2":function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"meal"},[r("h1",{staticClass:"title"},[e._v("Your Meal")]),r("div",{staticClass:"div-buttons"},[r("b-button",{staticClass:"all_btn_meal",attrs:{pill:"",variant:"warning"},on:{click:e.reorderMealRecipes}},[e._v("Reorder Meal Recipes")]),r("b-button",{staticClass:"all_btn_meal",attrs:{pill:"",variant:"warning"},on:{click:e.clearAllRecipes}},[e._v("Clear All Recipes")])],1),r("b-container",{staticClass:"p-4 all_recipes",attrs:{fluid:""}},e._l(this.recipes,(function(t,s){return r("b-row",{key:s,staticClass:"row"},[r("div",{staticClass:"recipe-container"},[r("RecipePreview",{staticClass:"recipePreview",attrs:{recipe:t,id:t.id,title:t.title,readyInMinutes:t.readyInMinutes,image:t.image,aggregateLikes:void 0==t.aggregateLikes?t.popularity:t.aggregateLikes,isFavorite:t.isFavorite,isLastseen:t.isLastseen,index:s+1}}),r("div",{staticClass:"dowm-buttons-div"},[r("b-button",{staticClass:"down-buttons",attrs:{pill:"",variant:"danger"},on:{click:function(){return e.deleteFromMeal(t)}}},[e._v("Delete From Meal")]),r("b-button",{staticClass:"down-buttons",attrs:{pill:"",variant:"success"}},[r("span",[e._v("Progress: "),r("strong",[e._v(e._s(e.progressBarDataDone[t.id])+" / "+e._s(e.progressBarDataTotal[t.id]))])])])],1)],1)])})),1),r("b-modal",{attrs:{id:"my-modal"},model:{value:e.showModal,callback:function(t){e.showModal=t},expression:"showModal"}},[r("h4",[e._v(" Please enter the new recipes order by stating there there numbers with commas between them: ")]),r("b-form",{attrs:{inline:""},on:{submit:e.onSubmit}},[r("b-form-group",{staticClass:"recipe_name",attrs:{id:"title",label:"New Recipes Order: ","label-for":"newOrderTitle"}},[r("b-form-input",{staticClass:"orderInput",attrs:{id:"newOrderTitle",placeholder:"Enter the new recipes order",required:""},model:{value:e.newOrder,callback:function(t){e.newOrder=t},expression:"newOrder"}})],1),r("b-button",{staticClass:"mx-auto w-100 submit",staticStyle:{width:"100px",display:"block"},attrs:{type:"submit",pill:"",variant:"dark"}},[e._v("Submit")])],1)],1)],1)},a=[],n=(r("4160"),r("0d03"),r("d3b7"),r("e25e"),r("ac1f"),r("25f0"),r("1276"),r("159b"),r("96cf"),r("1da1")),i=r("832a"),o={name:"MealPage",components:{RecipePreview:i["a"]},mounted:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.updateMeal();case 3:t.next=8;break;case 5:t.prev=5,t.t0=t["catch"](0),console.log(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))()},data:function(){return{progressBarDataTotal:{},progressBarDataDone:{},value:0,max:1,recipes:[],showModal:!1,newOrder:""}},methods:{updateMeal:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=JSON.parse(sessionStorage.getItem("mealRecipes")),r.forEach((function(t){e.recipes.push(JSON.parse(JSON.stringify(t)))})),s=JSON.parse(sessionStorage.getItem("mealRecipesInstructionLength")),void 0!=s&&s.forEach((function(t){e.progressBarDataTotal[t.recipeId.toString()]=t.numberOfInstructions,e.progressBarDataDone[t.recipeId.toString()]=0})),a=JSON.parse(sessionStorage.getItem("curInstructions")),void 0!=a&&a.forEach((function(t){e.progressBarDataDone[t.recipeId.toString()]=t.finishedInstructions}));case 6:case"end":return t.stop()}}),t)})))()},deleteFromMeal:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var s,a,n,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,t.$root.store.server_domain="https://dm-recipes.cs.bgu.ac.il",s=[],a=0,n=[],t.recipes.forEach((function(t){t.id!=e.id&&(s.push({recipeId:t.id,orderRecipe:a}),a++,n.push(t))})),r.next=8,t.axios.post(t.$root.store.server_domain+"/recipes/deletemeal",{recipeId:e.id,userName:t.$root.store.username,recipesAndOrderList:s});case 8:return r.sent,r.next=11,t.axios.post(t.$root.store.server_domain+"/recipes/meal",{userName:t.$root.store.username});case 11:i=r.sent,sessionStorage.setItem("recipesInMeal",JSON.stringify(i.data.length)),sessionStorage.setItem("mealRecipesInstructionLength",JSON.stringify(i.data)),sessionStorage.setItem("mealRecipes",JSON.stringify(n)),t.recipes=n,r.next=21;break;case 18:r.prev=18,r.t0=r["catch"](0),console.log(r.t0);case 21:case"end":return r.stop()}}),r,null,[[0,18]])})))()},reorderMealRecipes:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.showModal=!0;case 1:case"end":return t.stop()}}),t)})))()},onSubmit:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,s,a,n,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.$root.store.server_domain="https://dm-recipes.cs.bgu.ac.il",e.showModal=!1,r=e.newOrder.split(","),s=[],r.forEach((function(e){var t=parseInt(e);isNaN(t)?alert("Please enter numbers only!"):s.push(t)})),a=[],n=0,i=[],s.forEach((function(t){a.push({recipeId:e.recipes[t-1].id,orderRecipe:n}),n++,i.push(e.recipes[t-1])})),t.next=12,e.axios.post(e.$root.store.server_domain+"/recipes/changemealorder",{userName:e.$root.store.username,recipesAndOrderList:a});case 12:o=t.sent,"Meal order was updated successfully"==o.data&&(e.recipes=i,sessionStorage.setItem("mealRecipes",JSON.stringify(i))),t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](0),console.log(t.t0);case 19:case"end":return t.stop()}}),t,null,[[0,16]])})))()},clearAllRecipes:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$root.store.server_domain="https://dm-recipes.cs.bgu.ac.il",t.next=3,e.axios.post(e.$root.store.server_domain+"/recipes/deletemealrecipes",{userName:e.$root.store.username});case 3:return t.sent,t.next=6,e.axios.post(e.$root.store.server_domain+"/recipes/meal",{userName:e.$root.store.username});case 6:r=t.sent,sessionStorage.setItem("recipesInMeal",JSON.stringify(r.data.length)),sessionStorage.setItem("mealRecipesInstructionLength",JSON.stringify(r.data)),sessionStorage.setItem("mealRecipes",JSON.stringify([])),e.recipes=[];case 11:case"end":return t.stop()}}),t)})))()}}},c=o,l=(r("7829"),r("2877")),u=Object(l["a"])(c,s,a,!1,null,null,null);t["default"]=u.exports},7829:function(e,t,r){"use strict";var s=r("bd20"),a=r.n(s);a.a},bd20:function(e,t,r){}}]);
//# sourceMappingURL=chunk-0935024f.d3dbb573.js.map